{"ast":null,"code":"// import React, { useRef, useState } from \"react\";\n// import ChatBox from \"../../components/ChatBox/ChatBox\";\n// import Conversation from \"../../components/Coversation/Conversation\";\n// import LogoSearch from \"../../components/LogoSearch/LogoSearch\";\n// import NavIcons from \"../../components/NavIcons/NavIcons\";\n// import \"./Chat.css\";\n// import { useEffect } from \"react\";\n// import { userChats } from \"../../api/ChatRequests\";\n// import { useDispatch, useSelector } from \"react-redux\";\n// import { io } from \"socket.io-client\";\n\n// const Chat = () => {\n//   const dispatch = useDispatch();\n//   const socket = useRef();\n//   const { user } = useSelector((state) => state.authReducer.authData);\n\n//   const [chats, setChats] = useState([]);\n//   const [onlineUsers, setOnlineUsers] = useState([]);\n//   const [currentChat, setCurrentChat] = useState(null);\n//   const [sendMessage, setSendMessage] = useState(null);\n//   const [receivedMessage, setReceivedMessage] = useState(null);\n//   // Get the chat in chat section\n//   useEffect(() => {\n//     const getChats = async () => {\n//       try {\n//         const { data } = await userChats(user._id);\n//         setChats(data);\n//       } catch (error) {\n//         console.log(error);\n//       }\n//     };\n//     getChats();\n//   }, [user._id]);\n\n//   // Connect to Socket.io\n//   useEffect(() => {\n//     socket.current = io(\"ws://localhost:8800\");\n//     socket.current.emit(\"new-user-add\", user._id);\n//     socket.current.on(\"get-users\", (users) => {\n//       setOnlineUsers(users);\n//     });\n//   }, [user]);\n\n//   // Send Message to socket server\n//   useEffect(() => {\n//     if (sendMessage!==null) {\n//       socket.current.emit(\"send-message\", sendMessage);}\n//   }, [sendMessage]);\n\n//   // Get the message from socket server\n//   useEffect(() => {\n//     socket.current.on(\"recieve-message\", (data) => {\n//       console.log(data)\n//       setReceivedMessage(data);\n//     }\n\n//     );\n//   }, []);\n\n//   const checkOnlineStatus = (chat) => {\n//     const chatMember = chat.members.find((member) => member !== user._id);\n//     const online = onlineUsers.find((user) => user.userId === chatMember);\n//     return online ? true : false;\n//   };\n\n//   return (\n//     <div className=\"Chat\">\n//       {/* Left Side */}\n//       <div className=\"Left-side-chat\">\n//         <LogoSearch />\n//         <div className=\"Chat-container\">\n//           <h2>Chats</h2>\n//           <div className=\"Chat-list\">\n//             {chats.map((chat) => (\n//               <div\n//                 onClick={() => {\n//                   setCurrentChat(chat);\n//                 }}\n//               >\n//                 <Conversation\n//                   data={chat}\n//                   currentUser={user._id}\n//                   online={checkOnlineStatus(chat)}\n//                 />\n//               </div>\n//             ))}\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Right Side */}\n\n//       <div className=\"Right-side-chat\">\n//         <div style={{ width: \"20rem\", alignSelf: \"flex-end\" }}>\n//           <NavIcons />\n//         </div>\n//         <ChatBox\n//           chat={currentChat}\n//           currentUser={user._id}\n//           setSendMessage={setSendMessage}\n//           receivedMessage={receivedMessage}\n//         />\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Chat;","map":{"version":3,"names":[],"sources":["C:/Users/D.Sinchan/Desktop/others1/Accerlerlab/client/src/pages/Chat/Chat.jsx"],"sourcesContent":["// import React, { useRef, useState } from \"react\";\n// import ChatBox from \"../../components/ChatBox/ChatBox\";\n// import Conversation from \"../../components/Coversation/Conversation\";\n// import LogoSearch from \"../../components/LogoSearch/LogoSearch\";\n// import NavIcons from \"../../components/NavIcons/NavIcons\";\n// import \"./Chat.css\";\n// import { useEffect } from \"react\";\n// import { userChats } from \"../../api/ChatRequests\";\n// import { useDispatch, useSelector } from \"react-redux\";\n// import { io } from \"socket.io-client\";\n\n// const Chat = () => {\n//   const dispatch = useDispatch();\n//   const socket = useRef();\n//   const { user } = useSelector((state) => state.authReducer.authData);\n\n//   const [chats, setChats] = useState([]);\n//   const [onlineUsers, setOnlineUsers] = useState([]);\n//   const [currentChat, setCurrentChat] = useState(null);\n//   const [sendMessage, setSendMessage] = useState(null);\n//   const [receivedMessage, setReceivedMessage] = useState(null);\n//   // Get the chat in chat section\n//   useEffect(() => {\n//     const getChats = async () => {\n//       try {\n//         const { data } = await userChats(user._id);\n//         setChats(data);\n//       } catch (error) {\n//         console.log(error);\n//       }\n//     };\n//     getChats();\n//   }, [user._id]);\n\n//   // Connect to Socket.io\n//   useEffect(() => {\n//     socket.current = io(\"ws://localhost:8800\");\n//     socket.current.emit(\"new-user-add\", user._id);\n//     socket.current.on(\"get-users\", (users) => {\n//       setOnlineUsers(users);\n//     });\n//   }, [user]);\n\n//   // Send Message to socket server\n//   useEffect(() => {\n//     if (sendMessage!==null) {\n//       socket.current.emit(\"send-message\", sendMessage);}\n//   }, [sendMessage]);\n\n\n//   // Get the message from socket server\n//   useEffect(() => {\n//     socket.current.on(\"recieve-message\", (data) => {\n//       console.log(data)\n//       setReceivedMessage(data);\n//     }\n\n//     );\n//   }, []);\n\n\n//   const checkOnlineStatus = (chat) => {\n//     const chatMember = chat.members.find((member) => member !== user._id);\n//     const online = onlineUsers.find((user) => user.userId === chatMember);\n//     return online ? true : false;\n//   };\n\n//   return (\n//     <div className=\"Chat\">\n//       {/* Left Side */}\n//       <div className=\"Left-side-chat\">\n//         <LogoSearch />\n//         <div className=\"Chat-container\">\n//           <h2>Chats</h2>\n//           <div className=\"Chat-list\">\n//             {chats.map((chat) => (\n//               <div\n//                 onClick={() => {\n//                   setCurrentChat(chat);\n//                 }}\n//               >\n//                 <Conversation\n//                   data={chat}\n//                   currentUser={user._id}\n//                   online={checkOnlineStatus(chat)}\n//                 />\n//               </div>\n//             ))}\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Right Side */}\n\n//       <div className=\"Right-side-chat\">\n//         <div style={{ width: \"20rem\", alignSelf: \"flex-end\" }}>\n//           <NavIcons />\n//         </div>\n//         <ChatBox\n//           chat={currentChat}\n//           currentUser={user._id}\n//           setSendMessage={setSendMessage}\n//           receivedMessage={receivedMessage}\n//         />\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Chat;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}